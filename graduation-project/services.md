# Краткое описание

| Сервис                       | Область ответственности                             | База данных           |
| ---------------------------- | --------------------------------------------------- | --------------------- |
| **User Service**             | Пользователи, роли, разрешения                      | `users_db`            |
| **Auth Service**             | Аутентификация                                      | `auth_db`             |
| **Activity Service**         | Логи действий пользователей и системные события     | `activity_db`         |
| **Mailing Service**          | Управление отправкой писем                          | `messaging_db`        |
| **Board Management Service** | Доски, проекты, задачи, таблицы статусов            | `board_management_db` |
| **Notification Service**     | Уведомления по email/пуш, отслеживание сроков задач | `messaging_db`        |
| **API Gateway**              | Маршрутизация запросов, обработка аутентификации    | —                     |

---

# User Service (Сервис пользователей)

**Назначение:** управление пользовательскими данными

**Обязанности:**

- CRUD-операции с данными пользователей
- Назначение и управление правами доступа
- Предоставление информации о пользователях
- Валидация пользователей

**Взаимодействия:**

- **Предоставляет:** данные пользователей и информацию о ролях для сервисов Board, Activity, Notification и др.
- **Потребляет:** события или API-запросы от Auth Service (например, `UserRegistered`)
- **Излучает события:** `UserUpdated`, `UserDeleted` — для реакции других сервисов

---

# Auth Service (Сервис аутентификации)

**Назначение:** идентификация пользователей и управление доступом

**Обязанности:**

- Аутентификация пользователей по учетным данным
- Регистрация новых аккаунтов
- Генерация, обновление и валидация токенов
- Хеширование и управление паролями
- CRUD-операции с данными токенов

**Взаимодействия:**

- **Предоставляет:** API для аутентификации и проверки токенов (для API Gateway и других сервисов)
- **Потребляет:** создание профиля в User Service при регистрации
- **Излучает события:** `UserRegistered`, `PasswordResetRequested` (для Notification/Mailing)

---

# Activity Service (Сервис активности)

**Назначение:** хранение и предоставление логов действий пользователей и системных событий для аудита, аналитики и отслеживания.

**Обязанности:**

- Запись действий пользователей, полученных от других сервисов (например, создание доски, изменение задачи)
- Хранение системных событий (например, запланированные уведомления, изменения прав)
- Предоставление API для запроса логов (фильтрация по пользователю, доске, дате, типу действия)

**Взаимодействия:**

- **Потребляет:** доменные события от других сервисов (User, Board, Notification)
- **Предоставляет:** API для аналитических панелей и аудита

---

# Mailing Service (Сервис рассылок)

**Назначение:** отправка транзакционных и уведомительных писем, инициируемых другими сервисами.

**Обязанности:**

- Генерация и отправка писем (подтверждение аккаунта, сброс пароля, уведомления)
- Управление шаблонами писем и локализацией
- Отслеживание статуса доставки и повторные попытки отправки

**Взаимодействия:**

- **Потребляет:** события от Auth (например, `UserRegistered`, `PasswordResetRequested`)
- **Потребляет:** события от Notification или Board (например, `TaskDeadlineApproaching`)
- **Предоставляет:** внутренний API для прямых запросов на отправку писем (`POST /mail/send`)
- **Излучает события:** `EmailSent`, `EmailFailed` — для мониторинга

---

# Board Management Service (Сервис управления досками)

**Назначение:** управление основной логикой задач (подробности описаны в отдельном документе)

**Обязанности:**

- CRUD-операции для досок, проектов, задач и таблиц статусов
- Управление локальными правами и участниками (на уровне доски/проекта)
- Проверка действий пользователей по ролям и разрешениям (через User Service)
- Поддержание связей между досками, проектами, задачами и их создателями
- Излучение событий для других сервисов (Activity, Notification)

**Взаимодействия:**

- **Предоставляет:** API для взаимодействия с пользователями
- **Потребляет:** данные о пользователях и ролях
- **Излучает:** события для Notification и Activity сервисов

---

# Notification Service (Сервис уведомлений)

**Назначение:** отправка реальных и запланированных уведомлений пользователям

**Обязанности:**

- Прослушивание доменных событий от других сервисов
- Генерация и отправка уведомлений по соответствующим каналам (email, push и т.д.)

**Взаимодействия:**

- **Потребляет:** события от Board Service
- **Предоставляет:** API для получения и управления уведомлениями пользователя
- **Излучает:** события уведомлений

---

# API Gateway (Шлюз API)

**Назначение:** единая точка входа для запросов и балансировки нагрузки

**Обязанности:**

- Маршрутизация запросов
- Аутентификация
- Агрегация данных
- Безопасность
- Логирование

**Взаимодействия:**

- **Потребляет:** запросы от фронтенда
- **Вызывает:** бэкенд-сервисы
- **Излучает:** данные в Activity Service

---
