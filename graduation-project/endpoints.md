## **1. Общие системные эндпоинты**

Эти маршруты есть **в каждом сервисе**, даже если он не управляет “данными”.

| Метод | Путь             | Назначение                                                 | Пример ответа                                       |
| ----- | ---------------- | ---------------------------------------------------------- | --------------------------------------------------- |
| `GET` | `/health`        | Проверка здоровья сервиса (для оркестраторов, мониторинга) | `{ "status": "UP" }`                                |
| `GET` | `/info`          | Версия, имя сервиса, среда, git hash                       | `{ "service": "user-service", "version": "1.2.3" }` |
| `GET` | `/metrics`       | Метрики для Prometheus/Grafana                             | Prometheus-совместимый текст                        |
| `GET` | `/internal/ping` | Простой пинг для других сервисов                           | `"pong"`                                            |

---

## **2. User Service (пользователи, роли, разрешения)**

| Метод    | Путь                      | Назначение                    |
| -------- | ------------------------- | ----------------------------- |
| `GET`    | `/users`                  | Получить список пользователей |
| `GET`    | `/users/{id}`             | Получить пользователя по ID   |
| `POST`   | `/internal/users`         | Создать нового пользователя   |
| `PUT`    | `/users/{id}`             | Обновить пользователя         |
| `DELETE` | `/users/{id}`             | Удалить пользователя          |
| `GET`    | `/admin/roles`            | Список ролей                  |
| `GET`    | `/admin/users/{id}/roles` | Роли конкретного пользователя |
| `PUT`    | `/admin/users/{id}/roles` | Изменить роли пользователя    |
| `PUT`    | `/admin/users/{id}/roles` | Изменить роли пользователя    |

---

## **3. Auth Service (аутентификация и токены)**

| Метод  | Путь                           | Назначение                                            |
| ------ | ------------------------------ | ----------------------------------------------------- |
| `POST` | `/auth/register`               | Регистрация нового пользователя                       |
| `POST` | `/auth/login`                  | Логин, получение access/refresh токенов               |
| `POST` | `/auth/refresh`                | Обновление токена                                     |
| `POST` | `/auth/logout`                 | Выход, аннулирование токена                           |
| `POST` | `/auth/password/reset-request` | Запрос на сброс пароля                                |
| `POST` | `/auth/password/reset`         | Подтверждение сброса пароля                           |
| `GET`  | `/auth/me`                     | Получить данные о текущем пользователе (по JWT)       |
| `GET`  | `/auth/validate`               | Проверка валидности токена (используется API Gateway) |

---

## **4. Activity Service (аудит и логи)**

| Метод  | Путь                                      | Назначение                |
| ------ | ----------------------------------------- | ------------------------- |
| `GET`  | `/admin/activities`                       | Получить список логов     |
| `GET`  | `/admin/activities/{id}`                  | Получить конкретный лог   |
| `GET`  | `/admin/activities/user/{userId}`         | Логи по пользователю      |
| `GET`  | `/admin/activities/service/{serviceName}` | Логи по сервису           |
| `POST` | `/internal/admin/activities`              | записать действие вручную |

> Основное заполнение идёт через **события**, но REST-доступ нужен для UI-просмотра или админки.

---

## **5. Mailing Service (отправка писем)**

| Метод    | Путь                         | Назначение                              |
| -------- | ---------------------------- | --------------------------------------- |
| `POST`   | `/mail/send`                 | Отправить письмо вручную или по событию |
| `GET`    | `/admin/mail/status/{id}`    | Проверить статус отправленного письма   |
| `GET`    | `/admin/mail/templates`      | Получить список шаблонов                |
| `POST`   | `/admin/mail/templates`      | Добавить шаблон                         |
| `PUT`    | `/admin/mail/templates/{id}` | Обновить шаблон                         |
| `DELETE` | `/admin/mail/templates/{id}` | Удалить шаблон                          |

---

## **6. Board Management Service (доски, проекты, задачи, статусы)**

Внешние вызовы

| Метод    | Путь                                             | Назначение                     |
| -------- | ------------------------------------------------ | ------------------------------ |
| `GET`    | `/boards`                                        | Получить список досок          |
| `POST`   | `/boards`                                        | Создать новую доску            |
| `GET`    | `/boards/{id}`                                   | Получить доску                 |
| `PATCH`  | `/boards/{id}`                                   | Обновить доску                 |
| `DELETE` | `/boards/{id}`                                   | Удалить доску                  |
| `GET`    | `/boards/{id}/projects`                          | Получить проекты доски         |
| `GET`    | `/boards/{id}/statuses`                          | Получить список статусов доски |
| `POST`   | `/boards/{id}/statuses`                          | Изменить список статусов доски |
| `POST`   | `/boards/{board-id}/statuses`                    | Создать статус                 |
| `GET`    | `/statuses/{id}`                                 | Получить статус                |
| `PATCH`  | `/statuses/{id}`                                 | Обновить статус                |
| `DELETE` | `/statuses/{id}`                                 | Удалить статус                 |
| `POST`   | `/boards/{board-id}/projects`                    | Создать проект                 |
| `GET`    | `/projects/{id}`                                 | Получить проект                |
| `PATCH`  | `/projects/{id}`                                 | Обновить проект                |
| `DELETE` | `/projects/{id}`                                 | Удалить проекта                |
| `GET`    | `/boards/{board-id}/projects/{project-id}/tasks` | Задачи проекта                 |
| `POST`   | `/boards/{board-id}/tasks`                       | Создать задачу                 |
| `GET`    | `/tasks/{id}`                                    | Получить задачу                |
| `PATCH`  | `/tasks/{id}`                                    | Обновить задачу                |
| `DELETE` | `/tasks/{id}`                                    | Удалить задачу                 |

> Этот сервис будет ключевым источником событий — например, `TaskCreated`, `TaskDeadlineApproaching`.

---

## **7. Notification Service (уведомления)**

| Метод    | Путь                        | Назначение                                 |
| -------- | --------------------------- | ------------------------------------------ |
| `GET`    | `/notifications`            | Получить уведомления текущего пользователя |
| `GET`    | `/notifications/{id}`       | Получить одно уведомление                  |
| `POST`   | `/notifications/read`       | Пометить уведомления как прочитанные       |
| `DELETE` | `/notifications/{id}`       | Удалить уведомление                        |
| `POST`   | `/admin/notifications/test` | Отправить тестовое уведомление             |

> Основное взаимодействие происходит по событиям, но REST нужен для фронта.

---

## **8. API Gateway**

| Метод | Путь               | Назначение                           |
| ----- | ------------------ | ------------------------------------ |
| `GET` | `/`                | Корень API (документация, OpenAPI)   |
| `GET` | `/api/v1/*`        | Проксирование запросов к сервисам    |
| `GET` | `/auth/*`          | Проксирование в Auth Service         |
| `GET` | `/users/*`         | Проксирование в User Service         |
| `GET` | `/boards/*`        | Проксирование в Board Service        |
| `GET` | `/notifications/*` | Проксирование в Notification Service |

---
