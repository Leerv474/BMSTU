## **1. Общие системные эндпоинты**

Эти маршруты есть **в каждом сервисе**, даже если он не управляет “данными”.

| Метод | Путь             | Назначение                                                 | Пример ответа                                       |
| ----- | ---------------- | ---------------------------------------------------------- | --------------------------------------------------- |
| `GET` | `/health`        | Проверка здоровья сервиса (для оркестраторов, мониторинга) | `{ "status": "UP" }`                                |
| `GET` | `/info`          | Версия, имя сервиса, среда, git hash                       | `{ "service": "user-service", "version": "1.2.3" }` |
| `GET` | `/metrics`       | Метрики для Prometheus/Grafana                             | Prometheus-совместимый текст                        |
| `GET` | `/internal/ping` | Простой пинг для других сервисов                           | `"pong"`                                            |

---

## **2. User Service (пользователи, роли, разрешения)**

| Метод    | Путь                           | Назначение                                   |
| -------- | ------------------------------ | -------------------------------------------- |
| `GET`    | `/users/{id}`                  | Получить публичные данные пользователя по ID |
| `GET`    | `/users/me`                    | Получить данные текущего пользователя        |
| `PATCH`  | `/users/me`                    | Обновить данные текущего пользователя        |
| `DELETE` | `/users/me`                    | Удалить данные текущего пользователя         |
| `POST`   | `/internal/users`              | Создать нового пользователя                  |
| `PATCH`  | `/internal/users/{id}/disable` | Заблокировать пользователя                   |
| `PATCH`  | `/internal/users/{id}/enable`  | Разблокировать пользователя                  |
| `GET`    | `/internal/users/{id}/state`   | Получить состояние пользователя              |
| `PATCH`  | `/admin/users/{id}`            | Обновить пользователя                        |
| `DELETE` | `/admin/users/{id}`            | Удалить пользователя                         |
| `GET`    | `/admin/users`                 | Получить список пользователей                |
| `GET`    | `/admin/users/{id}`            | Получить пользователя по ID                  |
| `GET`    | `/admin/roles`                 | Список ролей                                 |
| `GET`    | `/admin/users/{id}/roles`      | Роли конкретного пользователя                |
| `PUT`    | `/admin/users/{id}/roles`      | Изменить роли пользователя                   |

---

## **3. Auth Service (аутентификация и токены)**

| Метод  | Путь                                    | Назначение                                                       |
| ------ | --------------------------------------- | ---------------------------------------------------------------- |
| `POST` | `/auth/register`                        | Регистрация нового пользователя                                  |
| `POST` | `/auth/login`                           | Логин, получение access/refresh токенов                          |
| `POST` | `/auth/refresh`                         | Обновление токена                                                |
| `POST` | `/auth/logout`                          | Выход, аннулирование токена                                      |
| `POST` | `/auth/password/reset-request`          | Запрос на сброс пароля                                           |
| `POST` | `/auth/password/reset`                  | Подтверждение сброса пароля                                      |
| `GET`  | `/auth/me`                              | Получить данные о текущем пользователе (по JWT)                  |
| `GET`  | `/internal/auth/validate`               | Проверка валидности JWT токена (используется API Gateway)        |
| `GET`  | `/internal/auth/service-token/validate` | Проверка валидности сервисного токена (используется API Gateway) |
| `GET`  | `/internal/auth/service-token/issue`    | Выдача сервисного токена (используется API Gateway)              |
| `GET`  | `/internal/auth/service-token/revoke`   | Изъятие сервисного токена (используется API Gateway)             |
| `GET`  | `/internal/auth/users/{id}/sync`        | Синхронизация данных с User Service                              |

---

## **4. Activity Service (аудит и логи)**

| Метод  | Путь                                      | Назначение              |
| ------ | ----------------------------------------- | ----------------------- |
| `GET`  | `/admin/activities`                       | Получить список логов   |
| `GET`  | `/admin/activities/{id}`                  | Получить конкретный лог |
| `GET`  | `/admin/activities/user/{userId}`         | Логи по пользователю    |
| `GET`  | `/admin/activities/service/{serviceName}` | Логи по сервису         |
| `POST` | `/internal/activities`                    | Записать действие       |

> Основное заполнение идёт через **события**, но REST-доступ нужен для UI-просмотра или админки.

---

## **5. Mailing Service (отправка писем)**

| Метод    | Путь                         | Назначение                              |
| -------- | ---------------------------- | --------------------------------------- |
| `POST`   | `/internal/mail/send`                 | Отправить письмо вручную или по событию |
| `GET`    | `/admin/mail/status/{id}`    | Проверить статус отправленного письма   |
| `GET`    | `/admin/mail/templates`      | Получить список шаблонов                |
| `POST`   | `/admin/mail/templates`      | Добавить шаблон                         |
| `PUT`    | `/admin/mail/templates/{id}` | Обновить шаблон                         |
| `DELETE` | `/admin/mail/templates/{id}` | Удалить шаблон                          |

---

## **6. Board Management Service (доски, проекты, задачи, статусы)**

Внешние вызовы

| **Метод** | **Путь**                             | **Назначение**                           |
| --------- | ------------------------------------ | ---------------------------------------- |
| `GET`     | `/boards`                            | Получить список досок пользователя       |
| `POST`    | `/boards`                            | Создать новую доску                      |
| `GET`     | `/boards/{boardId}`                  | Получить информацию о доске              |
| `PATCH`   | `/boards/{boardId}`                  | Обновить данные доски (например, имя)    |
| `DELETE`  | `/boards/{boardId}`                  | Удалить (мягкое удаление) доску          |
| `GET`     | `/boards/{boardId}/projects`         | Получить список проектов на доске        |
| `GET`     | `/boards/{boardId}/statuses`         | Получить список статусов доски           |
| `POST`    | `/boards/{boardId}/statuses/reorder` | Изменить порядок статусов в данной доске |
| `POST`    | `/boards/{boardId}/statuses`         | Создать новый статус на доске            |
| `GET`     | `/statuses/{statusId}`               | Получить информацию о статусе            |
| `PATCH`   | `/statuses/{statusId}`               | Обновить данные статуса                  |
| `DELETE`  | `/statuses/{statusId}`               | Удалить (мягкое удаление) статус         |
| `GET`     | `/statuses/{statusId}/tasks`         | Получить список задач в данном статусе   |
| `POST`    | `/boards/{boardId}/projects`         | Создать новый проект на доске            |
| `GET`     | `/projects/{projectId}`              | Получить информацию о проекте            |
| `PATCH`   | `/projects/{projectId}`              | Обновить данные проекта                  |
| `DELETE`  | `/projects/{projectId}`              | Удалить (мягкое удаление) проект         |
| `GET`     | `/projects/{projectId}/tasks`        | Получить список задач проекта            |
| `POST`    | `/boards/{boardId}/tasks`            | Создать задачу на доске                  |
| `POST`    | `/tasks/{taskId}/convert`            | Преобразовать задачу в проект            |
| `GET`     | `/tasks/{taskId}`                    | Получить информацию о задаче             |
| `PATCH`   | `/tasks/{taskId}`                    | Обновить данные задачи                   |
| `DELETE`  | `/tasks/{taskId}`                    | Удалить (мягкое удаление) задачу         |
| `POST`    | `/board/{boardId}/lock`              | Заблокировать доску                      |
| `POST`    | `/board/{boardId}/unlock`            | Разблокировать доску                     |

> Этот сервис будет ключевым источником событий — например, `TaskCreated`, `TaskDeadlineApproaching`.

---

## **7. Notification Service (уведомления)**

| Метод    | Путь                        | Назначение                                 |
| -------- | --------------------------- | ------------------------------------------ |
| `GET`    | `/notifications`            | Получить уведомления текущего пользователя |
| `GET`    | `/notifications/{id}`       | Получить одно уведомление                  |
| `POST`   | `/notifications/read`       | Пометить уведомления как прочитанные       |
| `DELETE` | `/notifications/{id}`       | Удалить уведомление                        |
| `POST`   | `/admin/notifications/test` | Отправить тестовое уведомление             |

> Основное взаимодействие происходит по событиям, но REST нужен для фронта.

---

## **8. API Gateway**

| Метод | Путь               | Назначение                           |
| ----- | ------------------ | ------------------------------------ |
| `GET` | `/`                | Корень API (документация, OpenAPI)   |
| `GET` | `/api/v1/*`        | Проксирование запросов к сервисам    |
| `GET` | `/auth/*`          | Проксирование в Auth Service         |
| `GET` | `/users/*`         | Проксирование в User Service         |
| `GET` | `/boards/*`        | Проксирование в Board Service        |
| `GET` | `/notifications/*` | Проксирование в Notification Service |

---
